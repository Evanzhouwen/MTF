<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MTF: ReadMe</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MTF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ReadMe </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Welcome to the home of <b>Modular Tracking Framework (MTF)</b> - a highly efficient and extensible library for <a href="https://en.wikipedia.org/wiki/Kanade%E2%80%93Lucas%E2%80%93Tomasi_feature_tracker">**registration based tracking**</a> that utilizes a modular decomposition of trackers in this domain. Each tracker within this framework comprises the following 3 modules:</p>
<ol type="1">
<li><b>Search Method (SM)</b>: <a href="http://far.in.tum.de/pub/benhimane2007ijcv/benhimane2007ijcv.pdf">ESM</a>, <a href="http://ieeexplore.ieee.org/xpl/login.jsp?tp=&amp;arnumber=990652&amp;url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel5%2F7768%2F21353%2F00990652.pdf%3Farnumber%3D990652">IC</a>, <a href="http://dl.acm.org/citation.cfm?id=290123">IA</a>, <a href="http://link.springer.com/article/10.1023%2FA%3A1008195814169">FC</a>, <a href="http://dl.acm.org/citation.cfm?id=1623280">FA</a>, <a href="http://www.comp.nus.edu.sg/~haoyu/rss/rss09/p44.html">NN</a>, <a href="http://cv.snu.ac.kr/jhkwon/PAMI14_tracking/index.htm">PF</a> or <a href="http://ieeexplore.ieee.org/xpl/login.jsp?tp=&amp;arnumber=7158323&amp;url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel7%2F7158225%2F7158304%2F07158323.pdf%3Farnumber%3D7158323">RANSAC</a></li>
<li><b>Appearance Model (AM)</b>: SSD, ZNCC, SCV, NCC, MI, CCRE KLD, SSIM or SPSS</li>
<li><b>State Space Model (SSM)</b>: Homography (8 dof), Affine (6 dof), Similitude(4 dof), Isometery (3 dof) or pure Translation (2 dof)</li>
</ol>
<p>Please refer <a href="http://webdocs.cs.ualberta.ca/~asingh1/docs/Modular%20Tracking%20Framework%20A%20Uni%EF%AC%81ed%20Approach%20to%20Registration%20based%20Tracking%20(CRV%202016">this paper</a>.pdf) for more details on the system design and <a href="http://webdocs.cs.ualberta.ca/~asingh1/docs/Modular%20Decomposition%20and%20Analysis%20of%20Registration%20based%20Trackers%20(CRV%202016">this one</a>.pdf) for some preliminary results. There is also an <a href="http://webdocs.cs.ualberta.ca/~vis/mtf/">**official website**</a> where Doxygen documentation will soon be available along with detailed tutorials and examples. It also provides several datasets formatted to work with MTF.</p>
<p>The library is implemented entirely in C++ though a Python interface called <code>pyMTF</code> also exists and works seamlessly with our <a href="https://bitbucket.org/abhineet123/ptf">Python Tracking Framework</a>. A Matlab interface similar to <a href="http://ugweb.cs.ualberta.ca/~vis/courses/CompVis/lab/mexVision/">Mexvision</a> is currently under development too.</p>
<p>We also provide a simple interface for <a href="http://www.ros.org/">ROS</a> called <a href="https://gitlab.com/vis/mtf_bridge">mtf_bridge</a> for seamless integration with robotics applications.</p>
<h2>Installation: </h2>
<ul>
<li>Prerequisites:<ul>
<li>MTF uses some <a href="https://en.wikipedia.org/wiki/C%2B%2B11">C++11</a> features so a supporting compiler is needed (<a href="https://gcc.gnu.org/projects/cxx0x.html">GCC 4.7</a> or newer)</li>
<li><a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a> should be installed and added to the C/C++ include paths. This can be done, for instance, by running <code>echo "export C_INCLUDE_PATH=$C_INCLUDE_PATH:/usr/include/eigen3" &gt;&gt; ~/.bashrc</code> and <code>echo "export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/include/eigen3" &gt;&gt; ~/.bashrc</code> assuming that Eigen is installed in _/usr/include/eigen3_</li>
<li><a href="http://opencv.org/">OpenCV</a> should be installed.</li>
<li><a href="http://www.cs.ubc.ca/research/flann/">FLANN library</a> and its dependency <a href="https://www.hdfgroup.org/HDF5/release/obtain5.html">HDF5</a> should be installed for the NN search method<ul>
<li>NN can be disabled at compile time using nn=0 if these are not available (see below)</li>
</ul>
</li>
<li><a href="http://www.boost.org/">Boost Library</a> should be installed</li>
<li><a href="https://www.threadingbuildingblocks.org/">Intel TBB</a> / <a href="http://openmp.org/wp/">OpenMP</a> should be installed if parallelization is to be enabled.</li>
<li><a href="https://visp.inria.fr/">ViSP library</a> should be installed if its <a href="https://visp.inria.fr/template-tracking/">template tracker module</a> or <a href="http://visp-doc.inria.fr/doxygen/visp-3.0.0/group__group__io__video.html">input pipeline</a> is enabled during compilation (see below).<ul>
<li>Note that <a href="http://gforge.inria.fr/frs/download.php/latestfile/475/visp-3.0.0.zip">version 3.0.0</a>+ is required. The Ubuntu apt package is 2.8 and is therefore incompatible.</li>
</ul>
</li>
<li><a href="https://bitbucket.org/abhineet123/xvision2">Xvision</a> should be installed if it is enabled during compilation (see below).</li>
</ul>
</li>
<li>Download the source code using <code>git clone <a href="https://abhineet123">https://abhineet123</a>@bitbucket.org/abhineet123/mtf.git</code>.</li>
<li>MTF comes with both a <a href="https://www.gnu.org/software/make/">make</a> and a <a href="https://cmake.org/">cmake</a> build system where the former is recommended for developers/contributors as it offers finer level of control while the latter is for users of the library who only want to install it once (or when the former does not work). For cmake, first use the <a href="https://cmake.org/runningcmake/">standard method</a> (i.e. <code>mkdir build &amp;&amp; cd build &amp;&amp; cmake ..</code>) to create the makefile and then use one of the make commands as specified below.</li>
<li>Use one of the following make commands to compile and install the library and the demo application:<ul>
<li><code>make</code> or <code>make mtf</code> : compiles the shared library (<em>libmtf.so</em>) to the build directory (<em>Build/Release</em>)</li>
<li><code>make install</code> : compiles the shared library if needed and copies it to _/usr/lib_; also copies the headers to _/usr/include/mtf_; this needs administrative (sudo) privilege.<ul>
<li>if this is not available, then the variables <code>MTF_LIB_INSTALL_DIR</code> and <code>MTF_HEADER_INSTALL_DIR</code> in the makefile can be modified to install elsewhere. This can be done either by editing the file itself or providing these with the make command as: <code>make install MTF_LIB_INSTALL_DIR=&lt;library_installation_dir&gt; MTF_HEADER_INSTALL_DIR=&lt;header_installation_dir&gt;</code><ul>
<li>these folders should be present in LD_LIBRARY_PATH and C_INCLUDE_PATH/CPLUS_INCLUDE_PATH environment variables respectively</li>
</ul>
</li>
</ul>
</li>
<li><code>make mtfe</code> compiles the example file <em>Examples/runMTF.cc</em> to create an executable called <em>runMTF</em> that uses this library to track objects. This too is placed in the build directory.</li>
<li><code>make install_exec</code>: creates <em>runMTF</em> if needed and copies it to _/usr/bin_; this needs administrative privilege too - change <code>MTF_EXEC_INSTALL_DIR</code> in Examples/Examples.mak if this is not available</li>
<li>**<code>make mtfi</code>** : all of the above - <b>recommended command that compiles and installs the library and the executable</b></li>
<li><code>make mtfp</code> : compile the Python interface to MTF - this creates a Python module called <em>pyMTF.so</em> that serves as a front end for running these trackers from Python. Usage of this module is fully demonstrated in the <code>mtfTracker.py</code> file in our <a href="https://bitbucket.org/abhineet123/ptf">Python Tracking Framework</a></li>
<li>Compile time switches for all of the above commands (only applicable to the make build system - for cmake there are corresponding options that can be configured before building its makefile):<ul>
<li><code>only_nt=1</code> will enable only the <b>Non Templated (NT)</b> implementations of SMs and disable their templated implementations that are extremely time consuming to compile though being faster at runtime (enabled by default)<ul>
<li>can be very useful for rapid debugging of AMs and SSMs where headers need to be modified;</li>
<li>the NT implementation of NN only works with GNN since FLANN library needs its object to be templated on the AM;</li>
</ul>
</li>
<li><code>nn=0</code> will disable the templated implementation of NN search method (enabled by default).<ul>
<li>should be specified if FLANN is not available</li>
<li>only matters if the previous option is not specified</li>
</ul>
</li>
<li><code>lt=0</code> will disable the third party open source learning based trackers - <a href="http://www.cvl.isy.liu.se/en/research/objrec/visualtracking/scalvistrack/index.html">DSST</a>, <a href="http://home.isr.uc.pt/~henriques/circulant/">KCF</a>, <a href="http://www.gnebehay.com/cmt/">CMT</a>, <a href="http://www.gnebehay.com/tld/">TLD</a>, <a href="http://www4.comp.polyu.edu.hk/~cslzhang/CT/CT.htm">RCT</a>, <a href="http://ieeexplore.ieee.org/xpl/login.jsp?tp=&amp;arnumber=5206737&amp;url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D5206737">MIL</a>, <a href="http://www.samhare.net/research/struck, [Fragments based tracker](http://www.cs.technion.ac.il/~amita/fragtrack/fragtrack.htm">Struck</a> and <a href="http://cvlab.epfl.ch/page-107683-en.html">Descriptor Fields Tracker (DFT)</a> - that are also bundled with this library (in <em>ThirdParty</em> subfolder) (enabled by default).</li>
<li><code>vp=1</code> will enable ViSP template trackers and input pipeline(disabled by default).</li>
<li><code>xv=1</code> will enable Xvision trackers and input pipeline (disabled by default and not recommended).</li>
<li><code>o=0</code> will compile the library in debug mode (<em>libmtf_debug.so</em>) and disable optimization - the corresponding executable is called <em>runMTFd</em></li>
</ul>
</li>
<li>Clean up commands:<ul>
<li><code>make clean</code> : removes all the .o files and the .so file created during compilation from the Build folder folder</li>
<li><code>make mtfc</code> : also removes the executable</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>Setting Parameters: </h2>
<p>MTF parameters can be specified either in the <em>cfg</em> files present in the <em>Config</em> sub folder or from the command line. Please refer the ReadMe in the **_Config_** sub folder for detailed instructions.</p>
<h2>Running the demo application: </h2>
<p>Use either <code>make run</code> or <code>runMTF</code> to start the tracking application using the settings specified as above.</p>
<h1>**For Developers** </h1>
<h2>Adding a new Appearance Model (AM) or State Space Model (SSM): </h2>
<h2>make </h2>
<ol type="1">
<li>Modify the .mak file in the respective sub directory to:<ul>
<li>add the name of the AM/SSM to the variable <code>APPEARANCE_MODELS</code> or <code>STATE_SPACE_MODELS</code> respectively</li>
<li>add rule to compile the .o of the new AM/SSM that is dependent on its source and header files - simplest method would be to copy an existing command and change the names of the model.</li>
</ul>
</li>
<li>Modify makefile to add any extra dependencies that the new files need to include under variable <code>FLAGS64</code> and extra libraries to link against under <code>LIB_MTF_LIBS</code></li>
</ol>
<h2>cmake </h2>
<ol type="1">
<li>- Modify the AM/AM.cmake file to add the name of the AM to set(APPEARANCE_MODELS …)<ul>
<li>Modify the SM/SM.cmake file to add the name of the SM to set(SEARCH_METHODS …)</li>
</ul>
</li>
<li>Modify "mtf.h" to add a new AM/SSM option in the overloaded function <code>getTrackerObj</code> (starting lines 498 and 533 respectively) that can be used with your config file to pick the AM/SSM, and create an object with this selected model.</li>
<li>Modify "Macros/register.h" to add the new AM/SSM class name under <code>_REGISTER_TRACKERS_AM/_REGISTER_HTRACKERS_AM</code> or <code>_REGISTER_TRACKERS/_REGISTER_TRACKERS_SSM/_REGISTER_HTRACKERS/_REGISTER_HTRACKERS_SSM</code> respectively</li>
</ol>
<p>All steps are identical for adding a new Search Method (SM) too except the last one which is not needed. Instead this header needs to be included and the appropriate macro needs to be called from its source file to register the SM with all existing AMs and SSMs. Refer to the last 2 lines of the .cc file of any existing SM to see how to do this.</p>
<h2>Example: Implementing a minimalistic AM that can be used with NN search method: </h2>
<p>You need to create a new derived class from AppearanceModel. Implement the following functions:</p>
<ol type="1">
<li><code>initializePixVals/updatePixVals</code> : takes the current location of the object as a 2xN matrix where N = no. of sampled points and each column contains the x,y coordinates of one point. By default, it is simply supposed to extract the pixel values at these locations from the current image but there is no restriction by design and you are free to compute anything from these pixel values.</li>
<li><code>initializeDistFeat/updateDistFeat</code> : these compute a distance feature transform from the current patch.</li>
<li><code>getDistFeat</code>: returns a pointer to an array containing the distance feature vector computed by the above function. There is also an overloaded variant of updateDistFeat that takes a pointer as input and directly writes this feature vector to the pre-allocated array pointed to by this pointer.</li>
<li>distance functor (<code>operator()</code>): computes a scalar that measures the dissimilarity or distance between two feature vectors (obtained using the previous two functions).</li>
</ol>
<h2>Example: Implementing a minimalistic AM that can be used with Particle Filter search method: </h2>
<p>You need to create a new derived class from AppearanceModel. Implement the following functions:</p>
<ol type="1">
<li>Same as with NN. No need to overwrite if just need to extract the pixel values</li>
<li><code>getLikelihood</code>: get the likelihood/weights of the particle</li>
<li><code>initialize</code>: initialize some class variables like the initial features.</li>
<li><code>update</code>: update the similarty between current patch and the template </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 8 2016 10:04:26 for MTF by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
